{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\life\\mygirl\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\life\\mygirl\\src\\components\\common\\Cart.vue?vue&type=style&index=0&id=74a50504&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\life\\mygirl\\src\\components\\common\\Cart.vue","mtime":1577065274000},{"path":"C:\\Users\\Administrator\\Desktop\\life\\mygirl\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\life\\mygirl\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\life\\mygirl\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\life\\mygirl\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\life\\mygirl\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmhlYWRjYXJ0ewogIGJhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHRvIHRvcCwjMGNjOTBjYmQgMCUscmdiYSg3LCAxNTUsIDcsIDAuNSkgMTAwJSk7CiAgZGlzcGxheTpmbGV4OwogIGp1c3RpZnktY29udGVudDpzcGFjZS1hcm91bmQ7IAogIHBhZGRpbmc6MTBweDsKICB3aWR0aDoxMDAlOwogIGhlaWdodDo0MHB4OwogIG1hcmdpbjowOwp9Ci5oZWFkLWxlZnR7CiAgZm9udC1zaXplOjMycHg7CiAgY29sb3I6IzAwMDsKICBmb250LWZhbWlseTpTVExpdGk7Cn0KLmhlYWQtcmlnaHR7CiAgaGVpZ2h0OjMycHg7Cn0KLmhlYWRUaXRsZXsKICBwYWRkaW5nOjVweCAwOwogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogIGFsaWduLWl0ZW1zOmNlbnRlcjsKICBtYXJnaW46IDEwcHg7Cn0KLmNhcnQtaXRlbXsKICBkaXNwbGF5OmZsZXg7CiAgaGVpZ2h0OjYwcHg7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgcGFkZGluZzoxMHB4OwogIGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNkZGQ7CiAgYm9yZGVyLXJhZGl1czoxMHB4OwogIGJhY2tncm91bmQtY29sb3I6I2VlZmZlZTsKICBtYXJnaW46IDEwcHg7Cn0KLmxlZnRpdGVtewogIGRpc3BsYXk6ZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwp9Ci5sZWZ0aXRlbSBpbWd7CiAgd2lkdGg6MjAlOwogIG1hcmdpbjowIDEwcHg7Cn0KLmxlZnRpdGVtIHB7CiAgZm9udC1zaXplOjE1cHg7CiAgbWFyZ2luOjAgN3B4Owp9Ci5taW50LWJ1dHRvbnsKICBmb250LXNpemU6MTVweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiNlZWZmZWU7CiAgYm94LXNoYWRvdzogMnB4IDJweCA1cHggMnB4Owp9Ci5idG5zewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBtYXJnaW4tcmlnaHQ6IDEwcHg7Cn0KLmJ0bnMgYnV0dG9uewogIHBhZGRpbmc6MDsKICBtYXJnaW4tdG9wOjdweDsKfQoubGVmdGl0ZW0taW5wdXR7CiAgd2lkdGg6MjBweDsKICBiYWNrZ3JvdW5kOiAjZWVmZmVlOwp9Ci5jYXJ0Zm9vdHsKICAvKiBkaXNwbGF5OiBmbGV4OyAqLwogIC8qIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgKi8KICAvKiB0ZXh0LWFsaWduOiBjZW50ZXI7ICovCiAgLyogbWFyZ2luOjA7ICovCiAgbWFyZ2luLXJpZ2h0OjIwcHg7CiAgZm9udC1zaXplOjI4cHg7CiAgZm9udC1mYW1pbHk6U1RMaXRpOwp9Ci8qIC5jYXJ0Zm9vdCBidXR0b257CiAgbWFyZ2luLWJvdHRvbToyMHB4OwogIGJhY2tncm91bmQ6ICNlZWZmZWU7CiAgYm9yZGVyLXJhZGl1czogM3B4OwogIGhlaWdodDozMHB4Owp9ICovCg=="},{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cart.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\r\n  <div class=\"gwcbg\">\r\n    <div class=\"headcart\">\r\n      <span class=\"head-left\">LIFE</span>\r\n      <img class=\"head-right\" src=\"../../assets/img/icon/kefu.png\">\r\n    </div>\r\n    <!-- 顶部位置 ：全选复选框 -->\r\n    <div class=\"headTitle\">\r\n      <div>\r\n        全选\r\n        <input type=\"checkbox\" v-model=\"alls\" @change=\"selectAll\">\r\n      </div>\r\n      <mt-button @click=\"dels\">删除</mt-button>\r\n    </div>\r\n    <!-- 中间购物车商品 -->\r\n    <div class=\"cart-item\" v-for=\"(item,i) of clist\" :key=\"i\">\r\n      <div class=\"leftitem\">\r\n        <input type=\"checkbox\" v-model=\"item.cb\" @change=\"isSelect\">\r\n        <img :src=\"`http://127.0.0.1:3000/${item.pic}`\">\r\n        <p @click=\"jumpdet\" :data-xlid=\"item.xlid\">{{item.title}}</p>\r\n        <p @click=\"jumpdet\" :data-xlid=\"item.xlid\">¥{{item.price.toFixed(2)}}</p>\r\n        <input :value=\"item.count\" type=\"text\" class=\"leftitem-input\">\r\n      </div>\r\n      <p class=\"btns\">\r\n        <button @click='cartAdd(i)'>＋</button>\r\n        <button @click=\"cartSub(i)\">－</button>\r\n      </p>\r\n      <mt-button @click=\"del\" :data-xlid=\"item.xlid\">删除</mt-button>\r\n    </div>\r\n    <p class=\"cartfoot\">总价:￥{{getTotal()}}</p>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data(){\r\n    return {\r\n      clist:[],\r\n      alls:false, //全选按钮的状态\r\n    }\r\n  },\r\n  created() {\r\n    this.add();\r\n  },\r\n  methods:{\r\n    getTotal(){ //计算总价\r\n      var total=0;\r\n      var rows=this.clist;\r\n      for(var i=0;i<rows.length;i++){\r\n        // console.log(rows[i]);\r\n        // console.log(this.clist[i].price);\r\n        // console.log(this.clist[i].count);\r\n        if(this.clist[i].cb){\r\n          total+=this.clist[i].price*this.clist[i].count;\r\n        }\r\n      }\r\n      // console.log(total.toFixed(2));\r\n      return total.toFixed(2);\r\n    },\r\n    cartSub(i){  //数量减少\r\n      if(this.clist[i].count>1){\r\n        this.clist[i].count--;\r\n      }\r\n    },\r\n    cartAdd(i){  //数量增加\r\n      this.clist[i].count++;\r\n    },\r\n    dels(){ //选中删除 删除多个\r\n      this.$messagebox.confirm('确定要删除选中的商品吗？')\r\n      .then(result=>{\r\n        var str='';\r\n        for(var item of this.clist){\r\n          if(item.cb){  //如果是选中的商品\r\n            str+=item.xlid+\",\";\r\n          }\r\n        }\r\n        // 如果没有选中商品，提示请选择要删除的商品\r\n        if(str.length==0){\r\n          this.$messagebox(\"提示\",\"请选择要删除的商品\")\r\n          return;\r\n        }\r\n        // 截取到倒数第一位 不要最后一个逗号\r\n        str=str.slice(0,-1);\r\n        // console.log(str);\r\n        var url=\"dels\";\r\n        var obj={ids:str};\r\n        this.axios.get(url,{params:obj})\r\n        .then(result=>{\r\n          if(result.data.code==1){\r\n            this.$toast(\"删除成功\");\r\n            this.add();\r\n          }\r\n        })\r\n      })\r\n    },\r\n    del(e){\r\n      // 删除指定的商品 先获xlid\r\n      var xlid=e.target.dataset.xlid;\r\n      if(confirm(\"确定要删除吗？\")){\r\n        var url=\"delcart\";\r\n        var obj={xlid};\r\n        // console.log(obj);\r\n        this.axios.get(url,{params:obj})\r\n        .then(result=>{\r\n          console.log(result);\r\n          if(result.data.code==1){\r\n            this.$toast(\"删除成功\");\r\n            this.add();\r\n          }\r\n        })\r\n      }\r\n    },\r\n    isSelect(){\r\n      // 当所有商品状态为true 全选为true\r\n      // 一个商品为false 全选为false\r\n      this.alls=this.clist.every(function(elem,i,arr){\r\n        return elem.cb;\r\n      })\r\n    },\r\n    selectAll(){  //全选状态\r\n      for(var item of this.clist){\r\n        item.cb=this.alls;\r\n      }\r\n    },\r\n    jumpdet(e){\r\n      // 获取自定义属性值\r\n      var xlid=e.target.dataset.xlid;\r\n      this.$router.push(`/Detail?xlid=${xlid}`);\r\n    },\r\n    add(){\r\n      var url='cart'\r\n      this.axios.get(url)\r\n      .then(result=>{\r\n        // console.log(result.data.data);\r\n        var rows=result.data.data;\r\n        for(var item of rows){\r\n          item.cb=false;\r\n        }\r\n        this.clist=rows;\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n  .headcart{\r\n    background-image:linear-gradient(to top,#0cc90cbd 0%,rgba(7, 155, 7, 0.5) 100%);\r\n    display:flex;\r\n    justify-content:space-around; \r\n    padding:10px;\r\n    width:100%;\r\n    height:40px;\r\n    margin:0;\r\n  }\r\n  .head-left{\r\n    font-size:32px;\r\n    color:#000;\r\n    font-family:STLiti;\r\n  }\r\n  .head-right{\r\n    height:32px;\r\n  }\r\n  .headTitle{\r\n    padding:5px 0;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items:center;\r\n    margin: 10px;\r\n  }\r\n  .cart-item{\r\n    display:flex;\r\n    height:60px;\r\n    justify-content: space-around;\r\n    text-align: center;\r\n    align-items: center;\r\n    padding:10px;\r\n    border-bottom:1px solid #ddd;\r\n    border-radius:10px;\r\n    background-color:#eeffee;\r\n    margin: 10px;\r\n  }\r\n  .leftitem{\r\n    display:flex;\r\n    align-items: center;\r\n  }\r\n  .leftitem img{\r\n    width:20%;\r\n    margin:0 10px;\r\n  }\r\n  .leftitem p{\r\n    font-size:15px;\r\n    margin:0 7px;\r\n  }\r\n  .mint-button{\r\n    font-size:15px;\r\n    background-color:#eeffee;\r\n    box-shadow: 2px 2px 5px 2px;\r\n  }\r\n  .btns{\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin-right: 10px;\r\n  }\r\n  .btns button{\r\n    padding:0;\r\n    margin-top:7px;\r\n  }\r\n  .leftitem-input{\r\n    width:20px;\r\n    background: #eeffee;\r\n  }\r\n  .cartfoot{\r\n    /* display: flex; */\r\n    /* justify-content: space-between; */\r\n    /* text-align: center; */\r\n    /* margin:0; */\r\n    margin-right:20px;\r\n    font-size:28px;\r\n    font-family:STLiti;\r\n  }\r\n  /* .cartfoot button{\r\n    margin-bottom:20px;\r\n    background: #eeffee;\r\n    border-radius: 3px;\r\n    height:30px;\r\n  } */\r\n</style>"]}]}