{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\项目\\life\\mygirl\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\项目\\life\\mygirl\\src\\components\\common\\Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\项目\\life\\mygirl\\src\\components\\common\\Cart.vue","mtime":1582015434794},{"path":"C:\\Users\\Administrator\\Desktop\\项目\\life\\mygirl\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\项目\\life\\mygirl\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\项目\\life\\mygirl\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\项目\\life\\mygirl\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKXsNCiAgICByZXR1cm4gew0KICAgICAgY2xpc3Q6W10sDQogICAgICBhbGxzOmZhbHNlLCAvL+WFqOmAieaMiemSrueahOeKtuaAgQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmFkZCgpOw0KICB9LA0KICBtZXRob2RzOnsNCiAgICBnZXRUb3RhbCgpeyAvL+iuoeeul+aAu+S7tw0KICAgICAgdmFyIHRvdGFsPTA7DQogICAgICB2YXIgcm93cz10aGlzLmNsaXN0Ow0KICAgICAgZm9yKHZhciBpPTA7aTxyb3dzLmxlbmd0aDtpKyspew0KICAgICAgICAvLyBjb25zb2xlLmxvZyhyb3dzW2ldKTsNCiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jbGlzdFtpXS5wcmljZSk7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY2xpc3RbaV0uY291bnQpOw0KICAgICAgICBpZih0aGlzLmNsaXN0W2ldLmNiKXsNCiAgICAgICAgICB0b3RhbCs9dGhpcy5jbGlzdFtpXS5wcmljZSp0aGlzLmNsaXN0W2ldLmNvdW50Ow0KICAgICAgICB9DQogICAgICB9DQogICAgICAvLyBjb25zb2xlLmxvZyh0b3RhbC50b0ZpeGVkKDIpKTsNCiAgICAgIHJldHVybiB0b3RhbC50b0ZpeGVkKDIpOw0KICAgIH0sDQogICAgY2FydFN1YihpKXsgIC8v5pWw6YeP5YeP5bCRDQogICAgICBpZih0aGlzLmNsaXN0W2ldLmNvdW50PjEpew0KICAgICAgICB0aGlzLmNsaXN0W2ldLmNvdW50LS07DQogICAgICB9DQogICAgfSwNCiAgICBjYXJ0QWRkKGkpeyAgLy/mlbDph4/lop7liqANCiAgICAgIHRoaXMuY2xpc3RbaV0uY291bnQrKzsNCiAgICB9LA0KICAgIGRlbHMoKXsgLy/pgInkuK3liKDpmaQg5Yig6Zmk5aSa5LiqDQogICAgICB0aGlzLiRtZXNzYWdlYm94LmNvbmZpcm0oJ+ehruWumuimgeWIoOmZpOmAieS4reeahOWVhuWTgeWQl++8nycpDQogICAgICAudGhlbihyZXN1bHQ9PnsNCiAgICAgICAgdmFyIHN0cj0nJzsNCiAgICAgICAgZm9yKHZhciBpdGVtIG9mIHRoaXMuY2xpc3Qpew0KICAgICAgICAgIGlmKGl0ZW0uY2IpeyAgLy/lpoLmnpzmmK/pgInkuK3nmoTllYblk4ENCiAgICAgICAgICAgIHN0cis9aXRlbS54bGlkKyIsIjsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLy8g5aaC5p6c5rKh5pyJ6YCJ5Lit5ZWG5ZOB77yM5o+Q56S66K+36YCJ5oup6KaB5Yig6Zmk55qE5ZWG5ZOBDQogICAgICAgIGlmKHN0ci5sZW5ndGg9PTApew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Vib3goIuaPkOekuiIsIuivt+mAieaLqeimgeWIoOmZpOeahOWVhuWTgSIpDQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIC8vIOaIquWPluWIsOWAkuaVsOesrOS4gOS9jSDkuI3opoHmnIDlkI7kuIDkuKrpgJflj7cNCiAgICAgICAgc3RyPXN0ci5zbGljZSgwLC0xKTsNCiAgICAgICAgLy8gY29uc29sZS5sb2coc3RyKTsNCiAgICAgICAgdmFyIHVybD0iZGVscyI7DQogICAgICAgIHZhciBvYmo9e2lkczpzdHJ9Ow0KICAgICAgICB0aGlzLmF4aW9zLmdldCh1cmwse3BhcmFtczpvYmp9KQ0KICAgICAgICAudGhlbihyZXN1bHQ9PnsNCiAgICAgICAgICBpZihyZXN1bHQuZGF0YS5jb2RlPT0xKXsNCiAgICAgICAgICAgIHRoaXMuJHRvYXN0KCLliKDpmaTmiJDlip8iKTsNCiAgICAgICAgICAgIHRoaXMuYWRkKCk7DQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGRlbChlKXsNCiAgICAgIC8vIOWIoOmZpOaMh+WumueahOWVhuWTgSDlhYjojrd4bGlkDQogICAgICB2YXIgeGxpZD1lLnRhcmdldC5kYXRhc2V0LnhsaWQ7DQogICAgICAvLyBjb25zb2xlLmxvZyh4bGlkKQ0KICAgICAgaWYoY29uZmlybSgi56Gu5a6a6KaB5Yig6Zmk5ZCX77yfIikpew0KICAgICAgICB2YXIgdXJsPSJkZWxjYXJ0IjsNCiAgICAgICAgdmFyIG9iaj17eGxpZH07DQogICAgICAgIC8vIGNvbnNvbGUubG9nKG9iaik7DQogICAgICAgIHRoaXMuYXhpb3MuZ2V0KHVybCx7cGFyYW1zOm9ian0pDQogICAgICAgIC50aGVuKHJlc3VsdD0+ew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7DQogICAgICAgICAgaWYocmVzdWx0LmRhdGEuY29kZT09MSl7DQogICAgICAgICAgICB0aGlzLiR0b2FzdCgi5Yig6Zmk5oiQ5YqfIik7DQogICAgICAgICAgICB0aGlzLmFkZCgpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIGlzU2VsZWN0KCl7DQogICAgICAvLyDlvZPmiYDmnInllYblk4HnirbmgIHkuLp0cnVlIOWFqOmAieS4unRydWUNCiAgICAgIC8vIOS4gOS4quWVhuWTgeS4umZhbHNlIOWFqOmAieS4umZhbHNlDQogICAgICB0aGlzLmFsbHM9dGhpcy5jbGlzdC5ldmVyeShmdW5jdGlvbihlbGVtLGksYXJyKXsNCiAgICAgICAgcmV0dXJuIGVsZW0uY2I7DQogICAgICB9KQ0KICAgIH0sDQogICAgc2VsZWN0QWxsKCl7ICAvL+WFqOmAieeKtuaAgQ0KICAgICAgZm9yKHZhciBpdGVtIG9mIHRoaXMuY2xpc3Qpew0KICAgICAgICBpdGVtLmNiPXRoaXMuYWxsczsNCiAgICAgIH0NCiAgICB9LA0KICAgIGp1bXBkZXQoZSl7DQogICAgICAvLyDojrflj5boh6rlrprkuYnlsZ7mgKflgLwNCiAgICAgIHZhciB4bGlkPWUudGFyZ2V0LmRhdGFzZXQueGxpZDsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGAvRGV0YWlsP3hsaWQ9JHt4bGlkfWApOw0KICAgIH0sDQogICAgYWRkKCl7DQogICAgICB2YXIgdXJsPSdjYXJ0Jw0KICAgICAgdGhpcy5heGlvcy5nZXQodXJsKQ0KICAgICAgLnRoZW4ocmVzdWx0PT57DQogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdC5kYXRhLmRhdGEpOw0KICAgICAgICB2YXIgcm93cz1yZXN1bHQuZGF0YS5kYXRhOw0KICAgICAgICBmb3IodmFyIGl0ZW0gb2Ygcm93cyl7DQogICAgICAgICAgaXRlbS5jYj1mYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmNsaXN0PXJvd3M7DQogICAgICB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cart.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\r\n  <div class=\"gwcbg\">\r\n    <div class=\"headcart\">\r\n      <span class=\"head-left\">LIFE</span>\r\n      <img class=\"head-right\" src=\"../../assets/img/icon/kefu.png\">\r\n    </div>\r\n    <!-- 顶部位置 ：全选复选框 -->\r\n    <div class=\"headTitle\">\r\n      <div>\r\n        全选\r\n        <input type=\"checkbox\" v-model=\"alls\" @change=\"selectAll\">\r\n      </div>\r\n      <mt-button @click=\"dels\">删除</mt-button>\r\n    </div>\r\n    <!-- 中间购物车商品 -->\r\n    <div class=\"cart-item\" v-for=\"(item,i) of clist\" :key=\"i\">\r\n      <div class=\"leftitem\">\r\n        <input type=\"checkbox\" v-model=\"item.cb\" @change=\"isSelect\">\r\n        <img :src=\"`http://127.0.0.1:3000/${item.pic}`\">\r\n        <p @click=\"jumpdet\" :data-xlid=\"item.xlid\">{{item.title}}</p>\r\n        <p @click=\"jumpdet\" :data-xlid=\"item.xlid\">¥{{item.price.toFixed(2)}}</p>\r\n        <input :value=\"item.count\" type=\"text\" class=\"leftitem-input\">\r\n      </div>\r\n      <p class=\"btns\">\r\n        <button @click='cartAdd(i)'>＋</button>\r\n        <button @click=\"cartSub(i)\">－</button>\r\n      </p>\r\n      <mt-button @click=\"del\" :data-xlid=\"item.xlid\">删除</mt-button>\r\n    </div>\r\n    <p class=\"cartfoot\">总价:￥{{getTotal()}}</p>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data(){\r\n    return {\r\n      clist:[],\r\n      alls:false, //全选按钮的状态\r\n    }\r\n  },\r\n  created() {\r\n    this.add();\r\n  },\r\n  methods:{\r\n    getTotal(){ //计算总价\r\n      var total=0;\r\n      var rows=this.clist;\r\n      for(var i=0;i<rows.length;i++){\r\n        // console.log(rows[i]);\r\n        // console.log(this.clist[i].price);\r\n        // console.log(this.clist[i].count);\r\n        if(this.clist[i].cb){\r\n          total+=this.clist[i].price*this.clist[i].count;\r\n        }\r\n      }\r\n      // console.log(total.toFixed(2));\r\n      return total.toFixed(2);\r\n    },\r\n    cartSub(i){  //数量减少\r\n      if(this.clist[i].count>1){\r\n        this.clist[i].count--;\r\n      }\r\n    },\r\n    cartAdd(i){  //数量增加\r\n      this.clist[i].count++;\r\n    },\r\n    dels(){ //选中删除 删除多个\r\n      this.$messagebox.confirm('确定要删除选中的商品吗？')\r\n      .then(result=>{\r\n        var str='';\r\n        for(var item of this.clist){\r\n          if(item.cb){  //如果是选中的商品\r\n            str+=item.xlid+\",\";\r\n          }\r\n        }\r\n        // 如果没有选中商品，提示请选择要删除的商品\r\n        if(str.length==0){\r\n          this.$messagebox(\"提示\",\"请选择要删除的商品\")\r\n          return;\r\n        }\r\n        // 截取到倒数第一位 不要最后一个逗号\r\n        str=str.slice(0,-1);\r\n        // console.log(str);\r\n        var url=\"dels\";\r\n        var obj={ids:str};\r\n        this.axios.get(url,{params:obj})\r\n        .then(result=>{\r\n          if(result.data.code==1){\r\n            this.$toast(\"删除成功\");\r\n            this.add();\r\n          }\r\n        })\r\n      })\r\n    },\r\n    del(e){\r\n      // 删除指定的商品 先获xlid\r\n      var xlid=e.target.dataset.xlid;\r\n      // console.log(xlid)\r\n      if(confirm(\"确定要删除吗？\")){\r\n        var url=\"delcart\";\r\n        var obj={xlid};\r\n        // console.log(obj);\r\n        this.axios.get(url,{params:obj})\r\n        .then(result=>{\r\n          console.log(result);\r\n          if(result.data.code==1){\r\n            this.$toast(\"删除成功\");\r\n            this.add();\r\n          }\r\n        })\r\n      }\r\n    },\r\n    isSelect(){\r\n      // 当所有商品状态为true 全选为true\r\n      // 一个商品为false 全选为false\r\n      this.alls=this.clist.every(function(elem,i,arr){\r\n        return elem.cb;\r\n      })\r\n    },\r\n    selectAll(){  //全选状态\r\n      for(var item of this.clist){\r\n        item.cb=this.alls;\r\n      }\r\n    },\r\n    jumpdet(e){\r\n      // 获取自定义属性值\r\n      var xlid=e.target.dataset.xlid;\r\n      this.$router.push(`/Detail?xlid=${xlid}`);\r\n    },\r\n    add(){\r\n      var url='cart'\r\n      this.axios.get(url)\r\n      .then(result=>{\r\n        // console.log(result.data.data);\r\n        var rows=result.data.data;\r\n        for(var item of rows){\r\n          item.cb=false;\r\n        }\r\n        this.clist=rows;\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n  .headcart{\r\n    background-image:linear-gradient(to top,#0cc90cbd 0%,rgba(7, 155, 7, 0.5) 100%);\r\n    display:flex;\r\n    justify-content:space-around; \r\n    padding:10px;\r\n    width:100%;\r\n    height:40px;\r\n    margin:0;\r\n  }\r\n  .head-left{\r\n    font-size:32px;\r\n    color:#000;\r\n    font-family:STLiti;\r\n  }\r\n  .head-right{\r\n    height:32px;\r\n  }\r\n  .headTitle{\r\n    padding:5px 0;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items:center;\r\n    margin: 10px;\r\n  }\r\n  .cart-item{\r\n    display:flex;\r\n    height:60px;\r\n    justify-content: space-around;\r\n    text-align: center;\r\n    align-items: center;\r\n    padding:10px;\r\n    border-bottom:1px solid #ddd;\r\n    border-radius:10px;\r\n    background-color:#eeffee;\r\n    margin: 10px;\r\n  }\r\n  .leftitem{\r\n    display:flex;\r\n    align-items: center;\r\n  }\r\n  .leftitem img{\r\n    width:20%;\r\n    margin:0 10px;\r\n  }\r\n  .leftitem p{\r\n    font-size:15px;\r\n    margin:0 7px;\r\n  }\r\n  .mint-button{\r\n    font-size:15px;\r\n    background-color:#eeffee;\r\n    box-shadow: 2px 2px 5px 2px;\r\n  }\r\n  .btns{\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin-right: 10px;\r\n  }\r\n  .btns button{\r\n    padding:0;\r\n    margin-top:7px;\r\n  }\r\n  .leftitem-input{\r\n    width:20px;\r\n    background: #eeffee;\r\n  }\r\n  .cartfoot{\r\n    /* display: flex; */\r\n    /* justify-content: space-between; */\r\n    /* text-align: center; */\r\n    /* margin:0; */\r\n    margin-right:20px;\r\n    font-size:28px;\r\n    font-family:STLiti;\r\n  }\r\n  /* .cartfoot button{\r\n    margin-bottom:20px;\r\n    background: #eeffee;\r\n    border-radius: 3px;\r\n    height:30px;\r\n  } */\r\n</style>"]}]}